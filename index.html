let lastResults = ['', '', ''];

async function fetchSwertresResults() {
  try {
    const response = await fetch('https://www.lottopcso.com/swertres-result-today/', {mode: 'cors'});
    if (!response.ok) {
      console.error('Failed to fetch Swertres results:', response.status);
      return;
    }
    const text = await response.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(text, 'text/html');
    // Parse the results text from the fetched page
    const rows = doc.querySelectorAll('.swertres-results table tbody tr');
    if (rows.length < 3) {
      console.error('Unexpected number of rows in Swertres results');
      return;
    }
    const tbody = document.querySelector('.swertres-results table tbody');
    if (!tbody) return;
    // Diff and update only if changed
    for (let i = 0; i < 3; i++) {
      const newText = rows[i].cells[1].textContent.trim();
      if (lastResults[i] !== newText) {
        tbody.rows[i].cells[1].textContent = newText;
        lastResults[i] = newText;
      }
    }
  } catch (error) {
    console.error('Error fetching Swertres results:', error);
  }
}

// Initial fetch
fetchSwertresResults();
// Periodic fetch every 5 seconds for low-latency polling
setInterval(fetchSwertresResults, 5000);
